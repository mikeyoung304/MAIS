# ============================================================================
# ENVIRONMENT VARIABLES TEMPLATE
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# TIER 1: Always Required (Development + Production)
# ----------------------------------------------------------------------------

# Application
NODE_ENV=development
PORT=3001

# Database (Supabase)
# Get from: Supabase Dashboard → Settings → Database → Connection String
DATABASE_URL=postgresql://postgres.gpyvdknhmevcfdbgtqir:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres
DIRECT_URL=postgresql://postgres.gpyvdknhmevcfdbgtqir:[YOUR-PASSWORD]@aws-0-us-west-1.pooler.supabase.com:5432/postgres

# Supabase
# Get from: Supabase Dashboard → Settings → API
# NOTE: SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY are also required for MCP server
SUPABASE_URL=https://gpyvdknhmevcfdbgtqir.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  # Same as SERVICE_KEY, for MCP
SUPABASE_JWT_SECRET=abuksGwVLTU7cfYZBE5EiQD2z4VZFW6528naUTzqbQ5aaAALD...

# Security (generate with: openssl rand -hex 32)
JWT_SECRET=your-64-character-hex-string-here
BOOKING_TOKEN_SECRET=your-64-character-hex-string-here     # REQUIRED: separate secret for booking tokens (prevents privilege escalation)
TENANT_SECRETS_ENCRYPTION_KEY=your-64-character-hex-string-here

# Adapters Mode (mock or real)
ADAPTERS_PRESET=real

# ----------------------------------------------------------------------------
# TIER 2: Production-Critical (Required in production only)
# ----------------------------------------------------------------------------

# Stripe (get from: Stripe Dashboard → Developers → API Keys)
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_...
STRIPE_SUCCESS_URL=http://localhost:5173/success
STRIPE_CANCEL_URL=http://localhost:5173

# Email (optional in dev - uses file-sink fallback)
POSTMARK_SERVER_TOKEN=your-postmark-token
POSTMARK_FROM_EMAIL=bookings@yourdomain.com

# CORS
CORS_ORIGIN=http://localhost:5173
# CORS allowed origins for production (comma-separated list)
# In development, all origins are allowed. In production, only these origins will be permitted.
# Example: ALLOWED_ORIGINS=https://app.maconaisolutions.com,https://admin.maconaisolutions.com,https://widget.maconaisolutions.com
ALLOWED_ORIGINS=https://app.maconaisolutions.com,https://admin.maconaisolutions.com

# ----------------------------------------------------------------------------
# TIER 3: Optional (Feature Flags)
# ----------------------------------------------------------------------------

# Monitoring (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
APP_VERSION=1.0.0
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Google Calendar (optional - uses mock fallback)
GOOGLE_CALENDAR_ID=your-calendar-id
GOOGLE_SERVICE_ACCOUNT_JSON_BASE64=base64-encoded-service-account-json

# Logging
LOG_LEVEL=debug
PRETTY_LOGS=true

# Graceful shutdown timeout (milliseconds)
# Time to wait for active connections to close before forcing exit
# Default: 30000 (30 seconds)
SHUTDOWN_TIMEOUT_MS=30000

# Reminder Scheduler (optional - uses default schedule if not set)
# Cron expression for reminder processing (default: '0 9 * * *' = daily at 9 AM)
# Format: minute hour day month weekday
# Examples:
#   '0 9 * * *'    = Daily at 9:00 AM
#   '0 */6 * * *'  = Every 6 hours
#   '0 8,20 * * *' = Daily at 8 AM and 8 PM
REMINDER_CRON_SCHEDULE=0 9 * * *
